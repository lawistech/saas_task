<div class="pipeline-view-wrapper"> <!-- Renamed -->
  <h1>Project Pipeline</h1> <!-- Removed custom class, global H1 style applies -->

  <div class="pipeline-board-scroll-container"> <!-- Added for better scroll containment if needed -->
    <div class="pipeline-board-content"> <!-- Renamed -->
      <section *ngFor="let status of statusOrder"
           class="pipeline-stage" <!-- Renamed and changed to section -->
           [ngClass]="'stage-' + status.toLowerCase().replace('_', '-')" <!-- More BEM-like status class -->
           (dragover)="onDragOver($event, status)"
           (drop)="onDrop($event, status)">

        <header class="stage-header"> <!-- Renamed and changed to header -->
          <h2>{{ statusLabels[status] }}</h2> <!-- Global H2 style applies -->
          <span class="stage-project-count">{{ groupedProjects[status].length }}</span> <!-- Renamed -->
        </header>

        <div class="stage-cards-list" cdkDropList [cdkDropListData]="groupedProjects[status]" (cdkDropListDropped)="onCardDrop($event)"> <!-- Renamed -->
          <article *ngFor="let project of groupedProjects[status]"
               class="kanban-card" <!-- Renamed and changed to article -->
               draggable="true"
               (dragstart)="onDragStart($event, project)"
               (dragend)="onDragEnd()"
               cdkDrag>

            <header class="card-header"> <!-- Renamed and changed to header -->
              <h3 class="card-title" (click)="viewProjectDetails(project)">{{ project.name }}</h3> <!-- Changed to H3 -->
              <div class="card-actions">
                <!-- Standardized buttons -->
                <button type="button" class="btn btn-icon btn-view" (click)="viewProjectDetails(project)" aria-label="View details">👁️</button>
                <button type="button" class="btn btn-icon btn-edit" (click)="onEditProject(project)" aria-label="Edit project">✏️</button>
                <button type="button" class="btn btn-icon btn-delete" (click)="onDeleteProject(project.id)" aria-label="Delete project">🗑️</button>
              </div>
            </header>

            <div class="card-meta-details"> <!-- Renamed -->
              <div class="meta-item" *ngIf="project.client_name"> <!-- Renamed -->
                <span class="meta-label">Client:</span> <!-- Renamed -->
                <span class="meta-value">{{ project.client_name }}</span> <!-- Renamed -->
              </div>
              <div class="meta-item" *ngIf="project.budget">
                <span class="meta-label">Budget:</span>
                <span class="meta-value">{{ formatCurrency(project.budget) }}</span>
              </div>
              <div class="meta-item" *ngIf="project.start_date">
                <span class="meta-label">Start:</span>
                <span class="meta-value">{{ formatDate(project.start_date) }}</span>
              </div>
              <div class="meta-item" *ngIf="project.end_date">
                <span class="meta-label">End:</span>
                <span class="meta-value">{{ formatDate(project.end_date) }}</span>
              </div>
            </div>

            <p class="card-description" *ngIf="project.description"> <!-- Changed to p -->
              {{ project.description }}
            </p>
          </article>

          <p *ngIf="groupedProjects[status].length === 0" class="empty-stage-message"> <!-- Renamed and changed to p -->
            No projects in this status
          </p>
        </div>
      </section>
    </div>
  </div>
</div>
