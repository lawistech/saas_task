// Assumes global SCSS variables are available
// @import '../../../styles.scss';

// Base wrapper for the entire component view
.project-table-wrapper {
  width: 100%;
  position: relative; // For positioning of dropdowns/modals
}

// Bar containing table-level controls like column settings
.table-controls-bar {
  display: flex;
  justify-content: flex-end;
  margin-bottom: 1rem;
  position: relative; // For dropdown positioning

  // Specific button to trigger column settings
  .column-settings-trigger {
    // Uses .btn and .btn-secondary from HTML for base styling
    // Add specific icon styling if needed
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem; // Match other secondary buttons like filters

    .icon {
      font-size: 1rem; // Ensure icon size is appropriate
    }
  }
}

// Panel for column settings (dropdown-like)
.column-settings-panel {
  position: absolute;
  top: calc(100% + 0.25rem); // Below the trigger button
  right: 0;
  width: 320px; // Slightly wider
  background-color: $background;
  border: 1px solid $subtle-borders;
  border-radius: 0.25rem;
  box-shadow: none; // Minimalist - remove shadow
  z-index: 100; // Ensure it's above table content

  .panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid $subtle-borders;

    h3 {
      margin: 0;
      font-size: 1.1rem; // Consistent heading size for panels
      font-weight: 500;
    }

    .close-panel-btn {
      // Uses .btn .btn-icon from HTML for base styling (transparent, minimal padding)
      color: $secondary-text;
      &:hover {
        color: $primary-text;
        background-color: lighten($subtle-borders, 6%);
      }
    }
  }

  .panel-content {
    padding: 1rem;
    max-height: 400px;
    overflow-y: auto;

    .settings-group {
      margin-bottom: 1rem;

      h4 {
        margin: 0 0 0.5rem 0;
        font-size: 1rem;
        font-weight: 500;
      }

      .settings-description {
        font-size: 0.875rem;
        color: $secondary-text;
        margin-bottom: 1rem;
      }

      .column-config-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;

        .column-config-item {
          display: flex;
          align-items: center;
          padding: 0.5rem;
          border: 1px solid transparent; // For drag indication or hover
          border-radius: 0.25rem;
          cursor: grab; // Indicate draggable

          &:hover {
            background-color: lighten($subtle-borders, 7%);
          }

          &.dragging { // Class to add during drag
            opacity: 0.5;
            border-color: $primary-text;
          }


          .column-visibility-toggle {
            margin-right: 0.75rem;
            // .form-checkbox class from HTML should apply global checkbox styles
          }

          .column-config-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            cursor: pointer; // For label click
            flex-grow: 1;

            .drag-handle-icon {
              color: $secondary-text;
              font-size: 1rem;
              cursor: grab;
            }
          }
        }
      }
    }
  }
}

// Modal for adding a new custom column
.add-column-modal {
  position: fixed; // Use fixed for true modal behavior over all content
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 350px; // Slightly wider
  background-color: $background;
  border: 1px solid $subtle-borders;
  border-radius: 0.25rem;
  box-shadow: none; // Minimalist
  z-index: 1050; // Higher than panel

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1rem;
    border-bottom: 1px solid $subtle-borders;

    h3 {
      margin: 0;
      font-size: 1.1rem;
      font-weight: 500;
    }
    .close-modal-btn {
      // Uses .btn .btn-icon from HTML
      color: $secondary-text;
       &:hover {
        color: $primary-text;
        background-color: lighten($subtle-borders, 6%);
      }
    }
  }

  .modal-content {
    padding: 1rem;

    .form-group {
      // Global .form-group styles should apply (margin-bottom)
      // Label and input should use global styles via .form-input
      label {
        font-size: 0.9rem; // Or inherit global
      }
    }

    .form-actions {
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
      margin-top: 1.5rem; // Space above actions
      // Buttons use .btn and .btn-secondary from HTML
    }
  }
}


// Wrapper for table to handle horizontal scrolling on smaller screens
.table-responsive-wrapper {
  width: 100%;
  overflow-x: auto;
}

// Main table styling
.data-table.project-data-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem; // Base font size for table content

  th, td {
    padding: 0.75rem 1rem; // Consistent padding
    text-align: left;
    border-bottom: 1px solid $subtle-borders;
    vertical-align: middle; // Ensure vertical alignment
  }

  th {
    background-color: lighten($subtle-borders, 7.5%); // Very light background for headers
    font-weight: 500; // Standard weight for headers
    color: $primary-text;
    user-select: none; // Prevent text selection on click for sorting
    position: relative; // For sort icon positioning

    &.sortable-header { // Class added in HTML
      cursor: pointer;
      &:hover {
        background-color: lighten($subtle-borders, 6%);
      }
    }

    .sort-indicator { // Renamed from .sort-icon
      margin-left: 0.5rem;
      font-size: 0.8em;
    }
  }

  // Group header rows (e.g., "Active Projects")
  .table-group-header {
    background-color: lighten($subtle-borders, 6.5%);
    font-weight: 500; // Slightly bolder than regular text
    color: $primary-text;

    td {
      padding: 0.75rem 1rem; // Consistent padding
      // border-bottom: 1px solid darken($subtle-borders, 5%); // Slightly stronger border for group
    }
  }

  // Styling for data rows
  .data-row.project-data-row {
    &:hover {
      background-color: lighten($subtle-borders, 7.5%); // Subtle hover for rows
    }

    &.row-selected { // Renamed from .selected
      background-color: lighten($primary-text, 92%); // Very light primary color tint
      // For a blue tint: lighten(desaturate(#007bff, 30%), 35%); if $accent-color was defined
    }
  }

  // Specific column styling examples (prefix with col- as in HTML)
  .col-checkbox {
    width: 40px; // Fixed width for checkbox column
    text-align: center;
  }

  .col-name { // Was .name-column
    min-width: 200px;
    font-weight: 500; // Make project name slightly bolder
  }

  .col-status { // Was .status-column
    width: 120px; // Fixed width for status
  }

  // Status Indicator (was .status-badge)
  .status-indicator {
    display: inline-block;
    padding: 0.3em 0.65em;
    font-size: 0.8rem;
    font-weight: 500;
    border-radius: 0.25rem; // Standard border radius
    text-align: center;
    line-height: 1.2; // Ensure consistent height

    // Minimalist status colors - using text color and light backgrounds
    &.status-active { background-color: lighten(#007bff, 40%); color: darken(#007bff, 10%); } // Example: Light Blue
    &.status-on-hold { background-color: lighten(#ffc107, 40%); color: darken(#ffc107, 20%); } // Example: Light Yellow/Orange
    &.status-completed { background-color: lighten(#28a745, 45%); color: darken(#28a745, 10%); } // Example: Light Green
    &.status-cancelled { background-color: lighten(#dc3545, 40%); color: darken(#dc3545, 10%); } // Example: Light Red
    // Fallback or other statuses
    &:not(.status-active):not(.status-on-hold):not(.status-completed):not(.status-cancelled) {
      background-color: $subtle-borders;
      color: $secondary-text;
    }
  }

  .col-budget { text-align: right; } // Align budget to right

  .col-actions { // Was .actions-column
    width: auto; // Adjust width based on number of buttons
    text-align: center; // Center action buttons
    white-space: nowrap; // Prevent buttons from wrapping

    .btn-icon { // Class added in HTML for action buttons
      // Global .btn .btn-icon styles should apply (transparent, minimal padding)
      margin: 0 0.125rem; // Small margin between icon buttons
      font-size: 1.1rem; // Slightly larger icons for actions
      color: $secondary-text;

      &:hover {
        color: $primary-text;
        background-color: lighten($subtle-borders, 6%);
      }
    }

    .btn-add-column { // Class added in HTML for '+' button in header
      // Uses .btn .btn-icon from HTML
      font-size: 1.25rem; // Make '+' slightly larger
      color: $primary-text;
       &:hover {
        background-color: lighten($subtle-borders, 6%);
      }
    }
  }
}